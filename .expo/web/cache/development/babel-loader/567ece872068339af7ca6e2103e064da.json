{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _readOnlyError from \"@babel/runtime/helpers/readOnlyError\";\nimport { StatusBar } from 'expo-status-bar';\nimport { useState } from 'react';\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport { LangPicker } from \"../components/LangPicker\";\nimport CustomInput from \"../components/CustomInput\";\nimport Icon from \"@expo/vector-icons/Entypo\";\nimport CustomButton from \"../components/CustomButton\";\nimport react from 'react';\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport { Trans, useTranslation, initReactI18next } from \"react-i18next\";\nimport { API } from \"../config\";\nimport axios from 'axios';\nimport i18n from \"../Context/changelang\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar WIDTH = Dimensions.get('window').width;\nvar HEIGHT = Dimensions.get('window').height;\nexport default function AppHome() {\n  var navigation = useNavigation();\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t,\n      i18n = _useTranslation.i18n;\n\n  var currentlanguage = i18n.language;\n  var route = useRoute();\n  var _route$params = route.params,\n      update = _route$params.update,\n      add = _route$params.add,\n      id = _route$params.id,\n      fname = _route$params.fname,\n      lname = _route$params.lname,\n      phone = _route$params.phone,\n      address = _route$params.address,\n      roll = _route$params.roll;\n\n  var _useState = useState(update),\n      _useState2 = _slicedToArray(_useState, 2),\n      isUpdating = _useState2[0],\n      setUpdating = _useState2[1];\n\n  var _useState3 = useState(add),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isAdding = _useState4[0],\n      setAdding = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      disable = _useState6[0],\n      setDisable = _useState6[1];\n\n  if (update === false) {\n    '', _readOnlyError(\"fname\");\n    '', _readOnlyError(\"lname\");\n    '', _readOnlyError(\"phone\");\n    '', _readOnlyError(\"address\");\n    '', _readOnlyError(\"roll\");\n    '', _readOnlyError(\"id\");\n  }\n\n  var _useState7 = useState(fname),\n      _useState8 = _slicedToArray(_useState7, 2),\n      Fname = _useState8[0],\n      setFname = _useState8[1];\n\n  var _useState9 = useState(lname),\n      _useState10 = _slicedToArray(_useState9, 2),\n      Lname = _useState10[0],\n      setLname = _useState10[1];\n\n  var _useState11 = useState(phone),\n      _useState12 = _slicedToArray(_useState11, 2),\n      Phone = _useState12[0],\n      setPhone = _useState12[1];\n\n  var _useState13 = useState(address),\n      _useState14 = _slicedToArray(_useState13, 2),\n      Address = _useState14[0],\n      setAddress = _useState14[1];\n\n  var _useState15 = useState(roll),\n      _useState16 = _slicedToArray(_useState15, 2),\n      Roll = _useState16[0],\n      setRoll = _useState16[1];\n\n  var _useState17 = useState(id),\n      _useState18 = _slicedToArray(_useState17, 2),\n      Id = _useState18[0],\n      setID = _useState18[1];\n\n  var isValidField = function isValidField() {\n    if (Fname == '' || Lname == '' || Phone == '' || Address == '' || Roll == '') {\n      return false;\n    }\n\n    return true;\n  };\n\n  var isValidForm = function isValidForm() {\n    var isValidPhone = /^\\d+$/.test(Phone);\n\n    if (!isValidField()) {\n      if (currentlanguage == 'En') {\n        alert('Require All Fields!');\n      } else {\n        alert('דרוש למלא הכל!');\n      }\n\n      return false;\n    }\n\n    if (!isValidPhone) {\n      if (currentlanguage == 'En') {\n        alert('Phone is Invalid!(Numbers only!)');\n      } else {\n        alert('המספר טלפון לא תקין (מספרים בלבד!)');\n      }\n\n      return false;\n    }\n\n    return true;\n  };\n\n  var config = {\n    headers: {\n      \"Access-Control-Allow-Origin\": true\n    }\n  };\n\n  var onAdd = function onAdd() {\n    if (!disable) {\n      setDisable(true);\n\n      if (isValidForm()) {\n        axios.post(API + \"/addemployee\", {\n          fname: Fname,\n          lname: Lname,\n          phone: Phone,\n          address: Address,\n          roll: Roll\n        }, config).then(function (response) {\n          console.log(response);\n          setAdding(false);\n          setDisable(false);\n          navigation.replace('WebHome');\n        }).catch(function (error) {\n          if (currentlanguage === 'En') {\n            alert('Something went Wrong! Try Again');\n          } else {\n            alert('משהו קרה נסה שוב!');\n          }\n\n          setDisable(false);\n        });\n      } else {\n        setDisable(false);\n        return;\n      }\n    }\n  };\n\n  var updateItem = function updateItem() {\n    if (!disable) {\n      setDisable(true);\n\n      if (isValidForm()) {\n        axios.post(API + \"/update\", {\n          id: Id,\n          fname: Fname,\n          lname: Lname,\n          phone: Phone,\n          address: Address,\n          roll: Roll\n        }, config).then(function (response) {\n          console.log(response);\n          setUpdating(false);\n          setDisable(false);\n          navigation.replace('WebHome');\n        }).catch(function (error) {\n          if (currentlanguage === 'En') {\n            alert('Something went Wrong! Try Again');\n          } else {\n            alert('משהו קרה נסה שוב!');\n          }\n\n          setDisable(false);\n        });\n      } else {\n        setDisable(false);\n        return;\n      }\n    }\n  };\n\n  return _jsxs(SafeAreaView, {\n    style: {\n      flex: 1,\n      backgroundColor: '#edf1f2'\n    },\n    children: [_jsx(StatusBar, {\n      style: \"auto\"\n    }), _jsx(Icon, {\n      onPress: function onPress() {\n        return navigation.navigate('WebHome');\n      },\n      name: \"chevron-small-left\",\n      size: 50,\n      style: {\n        color: 'lightslategrey',\n        marginTop: 15,\n        marginLeft: 20\n      }\n    }), _jsxs(View, {\n      style: {\n        width: '100%',\n        justifyContent: 'space-evenly',\n        alignItems: 'center',\n        flex: 1,\n        maxHeight: 520\n      },\n      children: [isAdding ? _jsx(Text, {\n        style: {\n          fontWeight: 'bold',\n          fontSize: 20,\n          alignSelf: 'flex-start',\n          marginBottom: 5,\n          marginLeft: currentlanguage === 'En' ? 35 : 265\n        },\n        children: t('Add Employee')\n      }) : _jsx(Text, {\n        style: {\n          fontWeight: 'bold',\n          fontSize: 20,\n          alignSelf: 'flex-end',\n          width: '80%',\n          marginBottom: 5\n        },\n        children: t('Update Employee')\n      }), _jsx(CustomInput, {\n        value: Fname,\n        setValue: setFname,\n        placeholder: t('First Name')\n      }), _jsx(CustomInput, {\n        value: Lname,\n        setValue: setLname,\n        placeholder: t('Last Name')\n      }), _jsx(CustomInput, {\n        value: Phone,\n        setValue: setPhone,\n        placeholder: t('Phone')\n      }), _jsx(CustomInput, {\n        value: Address,\n        setValue: setAddress,\n        placeholder: t('Address')\n      }), _jsx(CustomInput, {\n        value: Roll,\n        setValue: setRoll,\n        placeholder: t('Roll')\n      }), isAdding ? _jsx(CustomButton, {\n        disable: disable,\n        onPress: onAdd,\n        text: t('Add')\n      }) : _jsx(CustomButton, {\n        disable: disable,\n        onPress: updateItem,\n        text: t('Update')\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    resizeMode: 'contain',\n    flex: 1\n  }\n});","map":{"version":3,"sources":["C:/Users/Naor/Visual Code Files/WorkersManager/Screens/AppHome.js"],"names":["StatusBar","useState","LangPicker","CustomInput","Icon","CustomButton","react","useNavigation","useRoute","Trans","useTranslation","initReactI18next","API","axios","i18n","WIDTH","Dimensions","get","width","HEIGHT","height","AppHome","navigation","t","currentlanguage","language","route","params","update","add","id","fname","lname","phone","address","roll","isUpdating","setUpdating","isAdding","setAdding","disable","setDisable","Fname","setFname","Lname","setLname","Phone","setPhone","Address","setAddress","Roll","setRoll","Id","setID","isValidField","isValidForm","isValidPhone","test","alert","config","headers","onAdd","post","then","response","console","log","replace","catch","error","updateItem","flex","backgroundColor","navigate","color","marginTop","marginLeft","justifyContent","alignItems","maxHeight","fontWeight","fontSize","alignSelf","marginBottom","styles","StyleSheet","create","container","resizeMode"],"mappings":"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","sourcesContent":["import { StatusBar } from 'expo-status-bar';\r\nimport { useState } from 'react';\r\nimport { SafeAreaView, StyleSheet, Text, TouchableOpacity, View,Modal,Platform,Image,\r\nDimensions, ImageBackground,ScrollView,KeyboardAvoidingView} from 'react-native';\r\nimport {LangPicker} from '../components/LangPicker';\r\nimport CustomInput from '../components/CustomInput';\r\nimport Icon from 'react-native-vector-icons/Entypo';\r\nimport CustomButton from '../components/CustomButton';\r\nimport react from 'react';\r\nimport { useNavigation ,useRoute} from '@react-navigation/native';\r\nimport { Trans,useTranslation, initReactI18next } from \"react-i18next\";\r\nimport { API } from '../config';\r\nimport axios from 'axios';\r\nimport i18n from '../Context/changelang';\r\n\r\n\r\n\r\nconst WIDTH=Dimensions.get('window').width;\r\nconst HEIGHT=Dimensions.get('window').height;\r\n\r\nexport default function AppHome() {\r\n\r\n    const navigation=useNavigation();\r\n    const {t,i18n} = useTranslation();\r\n    const currentlanguage=(i18n.language);\r\n\r\n\r\n    const route =useRoute();\r\n    const {update,add,id,fname,lname,phone,address,roll}=route.params\r\n    \r\n    const [isUpdating,setUpdating]=useState(update);\r\n    const [isAdding,setAdding]=useState(add);\r\n    const [disable, setDisable]=useState(false);\r\n    if(update===false){\r\n        fname=('');\r\n        lname=('');\r\n        phone=('');\r\n        address=('');\r\n        roll=('');\r\n        id=('');\r\n    }\r\n    const[Fname,setFname]=useState(fname)\r\n    const[Lname,setLname]=useState(lname)\r\n    const[Phone,setPhone]=useState(phone)\r\n    const[Address,setAddress]=useState(address)\r\n    const[Roll,setRoll]=useState(roll)\r\n    const[Id,setID]=useState(id)\r\n\r\n\r\n    const isValidField=()=>{\r\n        if(Fname==''||Lname==''||Phone==''||Address==''||Roll==''){\r\n          return false;\r\n        }\r\n        return true;\r\n      };\r\n    const isValidForm=()=>{\r\n        let isValidPhone = /^\\d+$/.test(Phone);\r\n        if(!isValidField()){\r\n          if(currentlanguage=='En'){\r\n            alert('Require All Fields!')\r\n            }\r\n            else{\r\n              alert('דרוש למלא הכל!')\r\n            }\r\n          return false\r\n        }\r\n        if(!isValidPhone){\r\n          if(currentlanguage=='En'){\r\n            alert('Phone is Invalid!(Numbers only!)')\r\n          }\r\n            else{\r\n              alert('המספר טלפון לא תקין (מספרים בלבד!)')\r\n            }\r\n          return false\r\n        }\r\n        return true;\r\n      };\r\n      let config = {\r\n        headers: {\"Access-Control-Allow-Origin\":true,\r\n      }}\r\n\r\n    const onAdd=()=>{\r\n        if(!disable){\r\n        setDisable(true);\r\n        if(isValidForm()){\r\n          axios.post(`${API}/addemployee`,{\r\n            fname:Fname,\r\n            lname:Lname,\r\n            phone:Phone,\r\n            address:Address,\r\n            roll:Roll\r\n          },config)\r\n          .then(function (response) {\r\n            console.log(response);\r\n            setAdding(false);\r\n            setDisable(false);\r\n            navigation.replace('WebHome');\r\n          })\r\n          .catch(function (error) {\r\n            if(currentlanguage==='En'){\r\n            alert('Something went Wrong! Try Again')\r\n            }\r\n            else{\r\n            alert('משהו קרה נסה שוב!')\r\n            }\r\n            setDisable(false);\r\n          });\r\n        }\r\n        else{\r\n            setDisable(false);\r\n            return;\r\n        }\r\n        }\r\n    }\r\n    const updateItem=()=>{\r\n        if(!disable){\r\n        setDisable(true);\r\n        if(isValidForm()){\r\n          axios.post(`${API}/update`,{\r\n            id:Id,\r\n            fname:Fname,\r\n            lname:Lname,\r\n            phone:Phone,\r\n            address:Address,\r\n            roll:Roll\r\n          },config)\r\n          .then(function (response) {\r\n            console.log(response);\r\n            setUpdating(false);\r\n            setDisable(false);\r\n            navigation.replace('WebHome');\r\n          })\r\n          .catch(function (error) {\r\n            if(currentlanguage==='En'){\r\n              alert('Something went Wrong! Try Again')\r\n              }\r\n              else{\r\n              alert('משהו קרה נסה שוב!')\r\n              }\r\n            setDisable(false);\r\n          });\r\n        }\r\n        else{\r\n            setDisable(false);\r\n            return;\r\n        }\r\n        }\r\n    }\r\n\r\n    return(\r\n    <SafeAreaView style={{flex:1,backgroundColor: '#edf1f2'}}>\r\n      <StatusBar style=\"auto\" />\r\n      <Icon onPress={()=>navigation.navigate('WebHome')} name=\"chevron-small-left\" size={50} style={{color:'lightslategrey',marginTop:15,marginLeft:20}}/>\r\n      <View style={{width:'100%',justifyContent:'space-evenly',alignItems:'center',flex:1,maxHeight:520}}>\r\n      {isAdding?<Text style={{fontWeight: 'bold',fontSize:20,alignSelf:'flex-start',marginBottom:5,marginLeft:currentlanguage==='En'?35:265}}>\r\n      {t('Add Employee')}\r\n      </Text>:<Text style={{fontWeight: 'bold',fontSize:20,alignSelf:'flex-end',width:'80%',marginBottom:5}}>\r\n      {t('Update Employee')}</Text>}\r\n      <CustomInput value={Fname} setValue={setFname} placeholder={t('First Name')} />\r\n      <CustomInput value={Lname} setValue={setLname} placeholder={t('Last Name')} />\r\n      <CustomInput value={Phone} setValue={setPhone} placeholder={t('Phone')} />\r\n      <CustomInput value={Address} setValue={setAddress} placeholder={t('Address')} />\r\n      <CustomInput value={Roll} setValue={setRoll}  placeholder={t('Roll')} />\r\n      {isAdding?<CustomButton disable={disable} onPress={onAdd} text={t('Add')}></CustomButton>:\r\n      <CustomButton disable={disable} onPress={updateItem} text={t('Update')}></CustomButton>}\r\n      </View>\r\n    </SafeAreaView>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container:{\r\n        resizeMode: 'contain',\r\n        flex:1,\r\n    },\r\n});"]},"metadata":{},"sourceType":"module"}